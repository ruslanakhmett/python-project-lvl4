{% extends 'base.html' %}
{% load i18n %}
{% load bootstrap4 %}
{% load bootstrap %}



{% block content %}


{% if request.user.is_authenticated %}
    {% include 'navbar_in.html' %}
{% else %}
    {% include 'navbar_out.html' %}
{% endif %}

{% block navbar %}
{% endblock %}
<br>
<br>
<br>
{% if messages %}
    {% for message in messages %}
        {% if message.tags == 'success' %} 
              <div class="alert alert-success" role="alert">{{ message }}</div>
        {% else %}
              <div class="alert alert-danger" role="alert">{{ message }}</div>
        {% endif %}
    {% endfor %}
{% endif %}

<h1>{% trans "Задачи" %}</h1>
<br>

<main class="px-3">
  <a href="{% url 'tasks_create' %}" class="btn btn-secondary border-white bg-white">{% trans "Создать" %}</a>
</main>

<form method="get">
  {{ filter.form|bootstrap }}
    {% comment %} <div class="col-md">
      <div class="col-auto my-3"> {% endcomment %}
        
        <!--<label class="mr-sm-2" for="inlineFormCustomSelect">Статус</label>
        <select class="form-select" id="inlineFormCustomSelect">
          <option selected>----------</option>
          {% for status in statuses %}
          <option value="{{ status.name }}">{{ status.name }}</option>
          {% endfor %}
        </select>

        <label class="mr-sm-1" for="inlineFormCustomSelect">Исполнитель</label>
        <select class="form-select" id="inlineFormCustomSelect">
          <option selected>----------</option>
          {% for user in users %}
          <option value="{{ user.username}}">{{ user.username }}</option>
          {% endfor %}
        </select>

        <label class="mr-sm-2" for="inlineFormCustomSelect">Метка</label>
        <select class="form-select" id="inlineFormCustomSelect">
          <option selected>----------</option>
          {% for label in labels %}
          <option value="{{ label.name}}">{{ label.name }}</option>
          {% endfor %}
        </select>
      </div>-->

      <div class="col-auto my-1">
        <div class="custom-control custom-checkbox mr-sm-2">
          <input type="checkbox" class="form-check-input is-valid" name="self_tasks" id="customControlAutosizing">
          <label class="custom-control-label" for="customControlAutosizing">{% trans "Только свои задачи" %}</label>
        </div>
      </div>

      <div class="col-auto my-1">
        <button type="submit" class="btn btn-secondary border-white bg-white">{% trans "Показать" %}</button>
      </div>
    </form>


<table class="table table-striped table-dark">
    <thead>
      <tr>
        <th scope="col">{% trans "ID" %}</th>
        <th scope="col">{% trans "Имя" %}</th>
        <th scope="col">{% trans "Статус" %}</th>
        <th scope="col">{% trans "Автор" %}</th>
        <th scope="col">{% trans "Исполнитель" %}</th>
        <th scope="col">{% trans "Дата создания" %}</th>
      </tr>
    </thead>
    {% for task in filter.qs %}
    <tbody>
      <tr>
        <th scope="row">{{ task.pk }}</th>
        <td>
          <a class="nav-link" href="{{ task.pk }}">{{ task.name }}</a>
        </td>
        <td>{{ task.status.name }}</td>
        <td>{{ task.creator.username }}</td>
        <td>{{ task.perfomer.username }}</td>
        <td>{{ task.created_at|date:'Y-m-d H:i'}}</td>
        <td>
          <a class="nav-link" href="{{ task.pk }}/update/">{% trans "Изменить" %}</a>
          <a class="nav-link" href="{{ task.pk }}/delete/">{% trans "Удалить" %}</a>
        </td>
      </tr>
      {% endfor %}

    </tbody>
  </table>


{% endblock %}
