{% extends 'base.html' %}
{% load i18n %}
{% load bootstrap4 %}



{% block content %}


{% if request.user.is_authenticated %}
    {% include 'navbar_in.html' %}
{% else %}
    {% include 'navbar_out.html' %}
{% endif %}

{% block navbar %}
{% endblock %}
<br>
<br>
<br>
{% if messages %}
    {% for message in messages %}
        {% if message.tags == 'success' %} 
              <div class="alert alert-success" role="alert">{{ message }}</div>
        {% else %}
              <div class="alert alert-danger" role="alert">{{ message }}</div>
        {% endif %}
    {% endfor %}
{% endif %}

<h1>{% trans "Задачи" %}</h1>
<br>

<main class="px-3">
  <a href="{% url 'tasks_create' %}" class="btn btn-secondary border-white bg-white">{% trans "Создать" %}</a>
</main>

<form class="form-inline center" method="get">
    <div class="col-md">
      <div class="col-auto my-3">
        <label class="mr-sm-2" for="inlineFormCustomSelect">Статус</label>
        <select class="form-select" id="inlineFormCustomSelect">
          <option selected>----------</option>
          <option value="1">One</option>
          <option value="2">Two</option>
          <option value="3">Three</option>
        </select>

        <label class="mr-sm-1" for="inlineFormCustomSelect">Исполнитель</label>
        <select class="form-select" id="inlineFormCustomSelect">
          <option selected>----------</option>
          <option value="1">One</option>
          <option value="2">Two</option>
          <option value="3">Three</option>
        </select>

        <label class="mr-sm-2" for="inlineFormCustomSelect">Метка</label>
        <select class="form-select" id="inlineFormCustomSelect">
          <option selected>----------</option>
          <option value="1">One</option>
          <option value="2">Two</option>
          <option value="3">Three</option>
        </select>
        
      </div>

      
      <div class="col-auto my-1">
        <div class="custom-control custom-checkbox mr-sm-2">
          <input type="checkbox" class="custom-control-input" id="customControlAutosizing">
          <label class="custom-control-label" for="customControlAutosizing">Только свои задачи</label>
        </div>
      </div>
      <div class="col-auto my-1">
        <button type="submit" class="btn btn-secondary border-white bg-white">Показать</button>
      </div>
    </div>
  </form>

<table class="table table-striped table-dark">
    <thead>
      <tr>
        <th scope="col">ID</th>
        <th scope="col">Имя</th>
        <th scope="col">Статус</th>
        <th scope="col">Автор</th>
        <th scope="col">Исполнитель</th>
        <th scope="col">Дата создания</th>
      </tr>
    </thead>
    {% for task in tasks %}
    <tbody>
      <tr>
        <th scope="row">{{ task.pk }}</th>
        <td><a class="nav-link" href="{{ task.id }}/show/"></a>{{ task.name }}</td>
        <td>{{ task.status.name }}</td>
        <td>{{ task.creator.username }}</td>
        <td>{{ task.perfomer.username }}</td>
        <td>{{ task.created_at|date:'Y-m-d H:i'}}</td>
        <td>
          <a class="nav-link" href="{{ task.pk }}/update/">Изменить</a>
          <a class="nav-link" href="{{ task.pk }}/delete/">Удалить</a>
        </td>
      </tr>
      {% endfor %}

    </tbody>
  </table>


{% endblock %}
