{% extends 'base.html' %}
{% load i18n %}
{% load bootstrap4 %}


{% block content %}

{% if request.user.is_authenticated %}
    {% include 'navbar_in.html' %}
{% else %}
    {% include 'navbar_out.html' %}
{% endif %}

{% block navbar %}
{% endblock %}
<br>
<br>
<br>
{% if messages %}
    {% for message in messages %}
        {% if message.tags == 'success' %} 
              <div class="alert alert-success" role="alert">{{ message }}</div>
        {% else %}
              <div class="alert alert-danger" role="alert">{{ message }}</div>
        {% endif %}
    {% endfor %}
{% endif %}

<h1>{% trans "Изменение задачи" %}</h1>
<br>

<form class="form-inline center" method="post">
    {% csrf_token %}

  <div class="mb-2">
    <label for="exampleFormControlInput1" class="form-label">{% trans "Имя" %}</label>
    <input type="text" class="form-control" name="name" id="exampleFormControlInput1" value="{{ task.name }}">
  </div>
  
  <div class="mb-3">
    <label for="exampleFormControlTextarea1" class="form-label">{% trans "Описание" %}</label>
    <textarea class="form-control" type="text" name="text" id="exampleFormControlTextarea1" rows="3">{{ task.description }}</textarea>
  </div>

    <div class="col-md">
      <div class="col-auto my-3">

        <label class="mr-sm-2" for="inlineFormCustomSelect">{% trans "Статус" %}</label>
        <select name="status" class="form-select" id="inlineFormCustomSelect">
          <option selected>{{ task.status.name }}</option>
          {% for status in statuses %}
              {% if status.name != task.status.name %}
                <option value="{{ status.name }}">{{ status.name }}</option>
              {% endif %}
          {% endfor %}
        </select>
        <br>

        <label class="mr-sm-1" for="inlineFormCustomSelect">{% trans "Исполнитель" %}</label>
        <select name="executor" class="form-select" id="inlineFormCustomSelect">
          <option selected>{{ task.executor.username }}</option>
          {% for user in users %}
            {% if user.username != task.executor.username %}
              <option value="{{ user.username }}">{{ user.username }}</option>
            {% endif %}
          {% endfor %}
        </select>

        <br>
        <div class="form-group"><label for="id_labels">{% trans "Метки" %}</label>
          <select name="labels" class="form-control" title="" id="id_labels" multiple>
            
            {% for label in all_labels %}
              {% if label not in used_labels %}
                <option value="{{ label.name }}">{{ label.name }}</option>
              {% else %}
                <option selected>{{ label }}</option>
              {% endif %}
            {% endfor %}
          
          </select>
        </div>
        <br>
        <main class="px-3">
          <button type="submit" class="btn btn-secondary border-white bg-white">{% trans "Изменить" %}</button>
          </main>
    </form>
<br>
<br>
<br>

{% endblock %}